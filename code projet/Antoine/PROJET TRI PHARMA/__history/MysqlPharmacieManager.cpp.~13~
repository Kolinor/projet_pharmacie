//---------------------------------------------------------------------------

#pragma hdrstop

#include "MysqlPharmacieManager.h"
#define __WIN__
#include "mysql.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
MysqlPharmacieManager::MysqlPharmacieManager()
{
	this->mySql = new BDDSQL();
    this->mySql->connect("192.168.64.111","pharma","pharma","pharmacie");
}
MysqlPharmacieManager::~MysqlPharmacieManager()
{
	delete this->mySql;
}
bool MysqlPharmacieManager::selectOrdonnance(TStringGrid *excelOrdo)
{

}
bool MysqlPharmacieManager::insertOrdonnance()
{
	string requeteOrdonnance="INSERT INTO `Ordonnance`(`Etat`, `Numero_Caisse`, `Date_Saisie_Ordonnance`) VALUES (0,1,now());";
	this->mySql->insert(requeteOrdonnance);
}
bool MysqlPharmacieManager::insertMedicament()
{
    string requete="INSERT INTO `Medicament`(`Nom_Medicament`, `Hauteur`, `Largeur`, `Longueur`, `Quantite_Restante`, `Code_Barre`, `Prix`, `Nombre_Unite_Vendu`) VALUES ('Doliprane','10','50','20','30','84785','99.99','0');";
	this->mySql->insert(requete);
}

bool MysqlPharmacieManager::insertTapiris(String cle,String value)
{
	wchar_t * wStrCle = cle.c_str();
	int cleLength = wcslen(wStrCle);
	char * cle1 = new char[cleLength + 1];
	wcstombs(cle1, wStrCle, cleLength);


	wchar_t * wStrValue = value.c_str();
	int valueLength = wcslen(wStrValue);
	char * value1 = new char[valueLength + 1];
	wcstombs(value1, wStrValue, valueLength);

	String requete = "INSERT INTO `ParametreAutomate`(`Cle`, `Value`) VALUES ('" + cle + "', '" + value + "')"


	//string requete= ;
	//mySql->insert(requete);

	delete cle1;
	delete value1;
}
